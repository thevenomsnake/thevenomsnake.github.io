<!DOCTYPE html>


  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">

<script type="text/javascript">var OriginTitile=document.title,st;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="(/â‰§â–½â‰¦/)Aw, Snap!",clearTimeout(st)):(document.title="(à¸…>Ï‰<*à¸…) Fixed~"+OriginTitile,st=setTimeout(function(){document.title=OriginTitile},3e3))})</script>



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-bounce.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Swift," />










<meta name="description" content="ä»€ä¹ˆå˜›ï¼ŒåŸæ¥æˆ‘æŒºä¼šæ¬è¿çš„å˜›.JPG">
<meta name="keywords" content="Swift">
<meta property="og:type" content="article">
<meta property="og:title" content="Bundles and Packages">
<meta property="og:url" content="http://www.perphet.com/2019/08/Bundles-and-Packages/index.html">
<meta property="og:site_name" content="Tuski&#39;s Blog">
<meta property="og:description" content="ä»€ä¹ˆå˜›ï¼ŒåŸæ¥æˆ‘æŒºä¼šæ¬è¿çš„å˜›.JPG">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://i.loli.net/2019/08/18/rS8lzKvmgkqA7FX.png">
<meta property="og:image" content="https://i.loli.net/2019/08/18/S5kMjaqXCR3nNvh.png">
<meta property="og:updated_time" content="2019-08-18T09:51:22.685Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bundles and Packages">
<meta name="twitter:description" content="ä»€ä¹ˆå˜›ï¼ŒåŸæ¥æˆ‘æŒºä¼šæ¬è¿çš„å˜›.JPG">
<meta name="twitter:image" content="https://i.loli.net/2019/08/18/rS8lzKvmgkqA7FX.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.perphet.com/2019/08/Bundles-and-Packages/"/>



<link rel="stylesheet" href="../live2d/css/live2d.css" />


  <title>Bundles and Packages | Tuski's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner">
<div class="site-brand-wrapper">
  <div class="site-meta ">
    

   
    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tuski's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">I code my life</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-music">
          <a href="/music/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-music"></i> <br />
            
            Music
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.perphet.com/2019/08/Bundles-and-Packages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tuski">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tuski's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Bundles and Packages</h1>
        

        <div class="post-meta">

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-18T16:21:39+08:00">
                2019-08-18
              </time>
            

            

            
          </span>

          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/08/Bundles-and-Packages/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2019/08/Bundles-and-Packages/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          
             <span id="/2019/08/Bundles-and-Packages/" class="leancloud_visitors" data-flag-title="Bundles and Packages">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  3,048
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  14
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <script src="/assets/js/APlayer.min.js"> </script><blockquote class="blockquote-center">ä»€ä¹ˆå˜›ï¼ŒåŸæ¥æˆ‘æŒºä¼šæ¬è¿çš„å˜›.JPG</blockquote>

<a id="more"></a>
<p>In this season of giving, letâ€™s stop to consider one of the greatest gifts given to us by modern computer systems: <em>the gift of abstraction</em>.</p>
<p>åœ¨è¿™ä¸ªç»™äºˆçš„å­£èŠ‚ï¼Œè®©æˆ‘ä»¬åœä¸‹è„šæ­¥ï¼Œæ€è€ƒä¸€ä¸ªç°ä»£è®¡ç®—æœºç³»ç»Ÿèµäºˆæˆ‘ä»¬çš„æœ€æ£’çš„ç¤¼ç‰©ï¼šæŠ½è±¡ã€‚</p>
<p>Consider those billions of people around the world who use computers and mobile devices on a daily basis. They do this without having to know anything about the millions of CPU transistors and SSD sectors and LCD pixels that come together to make that happen. All of this is thanks to abstractions like files and directories and apps and documents.</p>
<p>åœ¨æ•°ç™¾ä¸‡ CPU æ™¶ä½“ç®¡ã€SSD æ‰‡åŒºå’Œ LCD åƒç´ å…±åŒåä½œä¸‹ï¼Œå…¨çƒæ•°åäº¿äººèƒ½å¤Ÿæ—¥å¸¸ä½¿ç”¨è®¡ç®—æœºå’Œç§»åŠ¨è®¾å¤‡è€Œå¯¹æ­¤å…¨ç„¶ä¸çŸ¥ã€‚è¿™ä¸€åˆ‡éƒ½åº”å½’åŠŸäºåƒæ–‡ä»¶ï¼Œç›®å½•ï¼Œåº”ç”¨å’Œæ–‡æ¡£è¿™æ ·çš„æŠ½è±¡ã€‚</p>
<p>This week on NSHipster, weâ€™ll be talking about two important abstractions on Apple platforms: bundles and packages. ğŸ</p>
<p>è¿™å‘¨çš„ NSHipsterï¼Œæˆ‘ä»¬å°†è®¨è®ºè‹¹æœå¹³å°ä¸Šä¸¤ä¸ªé‡è¦çš„æŠ½è±¡ï¼šåŒ…ä¸åŒ…è£¹ã€‚ğŸ</p>
<hr>
<p>Despite being distinct concepts, the terms â€œbundleâ€ and â€œpackageâ€ are frequently used interchangeably. Part of this is undoubtedly due to their similar names, but perhaps the main source of confusion is that many bundles just so happen to be packages (and vice versa).</p>
<p>å°½ç®¡æ˜¯ä¸åŒçš„æ¦‚å¿µï¼ŒåŒ…ä¸åŒ…è£¹è¿™ä¸¤ä¸ªæœ¯è¯­ç»å¸¸ä¼šè¢«æ›¿æ¢ä½¿ç”¨ã€‚æ¯«æ— ç–‘é—®ï¼Œé€ æˆå›°æƒ‘çš„éƒ¨åˆ†åŸå› å‡ºè‡ªå®ƒä»¬ç›¸ä¼¼çš„åç§°ï¼Œä½†æˆ–è®¸ä¸»è¦åŸå› æ˜¯è®¸å¤šåŒ…æ°å¥½ä¹Ÿæ˜¯åŒ…è£¹ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚</p>
<p>So before we go any further, letâ€™s define our terminology:</p>
<p>åœ¨æˆ‘ä»¬æ·±å…¥ä¹‹å‰ï¼Œå…ˆå®šä¹‰ä¸€ä¸‹è¿™ä¸¤ä¸ªæœ¯è¯­ï¼š</p>
<ul>
<li>A bundle is a directory with a known structure that contains executable code and the resources that code uses.</li>
<li><p>A package is a directory that looks like a file when viewed in Finder.</p>
</li>
<li><p>åŒ…æ˜¯æŒ‡å…·æœ‰å·²çŸ¥ç»“æ„çš„ï¼ŒåŒ…å«å¯æ‰§è¡Œä»£ç ï¼Œä»¥åŠä»£ç æ‰€éœ€çš„èµ„æºçš„ç›®å½•ã€‚</p>
</li>
<li>åŒ…è£¹æ˜¯æŒ‡åœ¨è®¿è¾¾ä¸­çœ‹èµ·æ¥åƒæ˜¯æ–‡ä»¶çš„ç›®å½•ã€‚</li>
</ul>
<p>The following diagram illustrates the relationship between bundles and packages, as well as things like apps, frameworks, plugins, and documents that fall into either or both categories:</p>
<p>ä¸‹å›¾å±•ç¤ºäº†åŒ…ä¸åŒ…è£¹ä¹‹é—´çš„å…³ç³»ï¼Œå°†åº”ç”¨ã€æ¡†æ¶åŒ…ã€æ’ä»¶åŒ…å’Œæ–‡æ¡£åˆ†åˆ«æ”¾å…¥ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç±»ä¹‹ä¸­ï¼š</p>
<p><img src="https://i.loli.net/2019/08/18/rS8lzKvmgkqA7FX.png" alt="QQ20190818-173041.png"></p>
<blockquote>
<p>If youâ€™re still fuzzy on these distinctions, hereâ€™s an analogy that might help you keep things straight:</p>
<p>Think of a <em>package</em> as a <em>box</em> (ğŸ“¦) whose contents are sealed away and are considered to exist as a single entity. Contrast that with <em>bundles</em>, which are more like <em>backpacks</em> (ğŸ’) â€” each with special pockets and compartments for carrying whatever you need, and coming in different configurations depending on whether itâ€™s for taking to school, work, or the gym. If somethingâ€™s <em>both a bundle and a package</em>, itâ€™s like a piece of <em>luggage</em> (ğŸ§³): sealed like a box and organized into compartments like a backpack.</p>
<p>å¦‚æœå¯¹ä¸¤è€…çš„åŒºåˆ«ä½ ä¾ç„¶æ„Ÿåˆ°å›°æƒ‘ï¼Œè¿™ä¸ªç±»æ¯”æˆ–è®¸èƒ½å¸®åŠ©ä½ ç†è§£ï¼š<br>æŠŠåŒ…è£¹æƒ³è±¡æˆæ˜¯ä¸€ä¸ªå†…å®¹è¢«éšè—çš„ç›’å­ï¼ˆğŸ“¦ï¼‰ï¼Œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å®ä½“è€Œå­˜åœ¨ã€‚è¿™ç‚¹ä¸åŒ…ä¸åŒï¼ŒåŒ…æ›´åƒæ˜¯ä¸€ä¸ªèƒŒåŒ…ï¼ˆğŸ’ï¼‰ â€”â€” æ¯ä¸€æ¬¾éƒ½æœ‰ç‰¹æ®Šçš„å£è¢‹å’Œéš”å±‚ç”¨æ¥æºå¸¦ä½ éœ€è¦çš„ä¸œè¥¿ï¼Œä¸åŒçš„é…ç½®ç”¨ä»¥å†³å®šæ˜¯å¸¦å»å­¦æ ¡ï¼Œå»å·¥ä½œï¼Œè¿˜æ˜¯å»å¥èº«æˆ¿ã€‚å¦‚æœæŸæ ·ä¸œè¥¿æ—¢æ˜¯åŒ…ä¹Ÿæ˜¯åŒ…è£¹ï¼Œæ°ä¼¼è¡Œæï¼ˆğŸ§³ï¼‰ä¸€èˆ¬ï¼šåƒç›’å­ä¸€æ ·æµ‘ç„¶ä¸€ä½“ï¼ŒåƒèƒŒåŒ…ä¸€æ ·åˆ†éš”è‡ªå¦‚ã€‚</p>
</blockquote>
<h1 id="Bundles"><a href="#Bundles" class="headerlink" title="Bundles"></a>Bundles</h1><p>Bundles are primarily for <strong>improving developer experience</strong> by providing structure for organizing code and resources. This structure not only allows for predictable loading of code and resources but allows for system-wide features like localization.</p>
<p>åŒ…ä¸ºä»£ç å’Œèµ„æºçš„ç»„ç»‡æä¾›äº†ç‰¹å®šç»“æ„ï¼Œæ„åœ¨<strong>æå‡å¼€å‘è€…çš„ä½“éªŒ</strong>ã€‚è¿™ä¸ªç»“æ„ä¸ä»…å…è®¸é¢„æµ‹æ€§çš„åŠ è½½ä»£ç å’Œèµ„æºï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç±»ä¼¼äºæœ¬åœ°åŒ–è¿™æ ·çš„ç³»ç»Ÿæ€§ç‰¹æ€§ã€‚</p>
<p>Bundles fall into one of the following three categories, each with their own particular structure and requirements:</p>
<p>åŒ…åˆ†å±äºä»¥ä¸‹ä¸‰ä¸ªç±»åˆ«ï¼Œæ¯ä¸€ç§éƒ½æœ‰å®ƒè‡ªå·±ç‰¹æ®Šçš„ç»“æ„å’Œè¦æ±‚ï¼š</p>
<ul>
<li><p><strong>App Bundles</strong>, which contain an executable that can be launched, an <code>Info.plist</code> file describing the executable, app icons, launch images, and other assets and resources used by the executable, including interface files, strings files, and data files.</p>
</li>
<li><p><strong>Framework Bundles</strong>, which contain code and resources used by the dynamic shared library.</p>
</li>
<li><p><strong>Loadable Bundles</strong> like <em>plug-ins</em>, which contain executable code and resources that extend the functionality of an app. </p>
</li>
<li><p><strong>åº”ç”¨åŒ…ï¼ˆApp Bundlesï¼‰</strong>ï¼šåŒ…å«ä¸€ä¸ªèƒ½è¢«å¯åŠ¨çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸€ä¸ªæè¿°å¯æ‰§è¡Œæ–‡ä»¶çš„ <code>Info.plist</code> æ–‡ä»¶ï¼Œåº”ç”¨å›¾æ ‡ï¼Œå¯åŠ¨å›¾ç‰‡ï¼Œèƒ½è¢«å¯æ‰§è¡Œæ–‡ä»¶è°ƒç”¨çš„æ¥å£æ–‡ä»¶ï¼Œå­—ç¬¦ä¸²æ–‡ä»¶ï¼Œä»¥åŠæ•°æ®æ–‡ä»¶ã€‚</p>
</li>
<li><strong>æ¡†æ¶åŒ…ï¼ˆFramework Bundlesï¼‰</strong>ï¼šåŒ…å«åŠ¨æ€åˆ†äº«åº“æ‰€éœ€è¦çš„ä»£ç å’Œèµ„æºã€‚</li>
<li><strong>å¯åŠ è½½åŒ…ï¼ˆLoadable Bundlesï¼‰</strong>ï¼šç±»ä¼¼äºæ’ä»¶ï¼ŒåŒ…å«æ‰©å±•åº”ç”¨åŠŸèƒ½çš„å¯æ‰§è¡Œä»£ç å’Œèµ„æºã€‚</li>
</ul>
<h1 id="Accessing-Bundle-Contents"><a href="#Accessing-Bundle-Contents" class="headerlink" title="Accessing Bundle Contents"></a>Accessing Bundle Contents</h1><p>In apps, playgrounds, and most other contexts the bundle youâ€™re interested in is accessible through the type property <code>Bundle.main</code>. And most of the time, youâ€™ll use <code>url(forResource:withExtension:)</code> (or one of its variants) to get the location of a particular resource.</p>
<p>å¯¹äºåº”ç”¨ï¼Œplaygroundsï¼Œä»¥åŠå…¶å®ƒä½ æ„Ÿå…´è¶£çš„åŒ…æ¥è¯´ï¼Œéƒ½èƒ½é€šè¿‡ <code>Bundle.main</code> è¿›è¡Œè®¿é—®ã€‚å¤§å¤šæ•°æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ <code>url(forResource:withExtension:)</code>ï¼ˆæˆ–å®ƒçš„ä¸€ç§å˜ä½“ï¼‰æ¥è·å–ç‰¹å®šèµ„æºçš„è·¯å¾„ã€‚</p>
<p>For example, if your app bundle includes a file named <code>Photo.jpg</code>, you can get a URL to access it like so:</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœåº”ç”¨ä¸­åŒ…å«äº†ä¸€ä¸ªåå« <code>Photo.jpg</code> çš„æ–‡ä»¶ï¼Œç”¨ä¸‹é¢çš„æ–¹æ³•èƒ½è·å¾—è®¿é—®å®ƒçš„ URLï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`<span class="type">Bundle</span>.main.url(forResource: <span class="string">"Photo"</span>, withExtension: <span class="string">"jpg"</span>)`</div></pre></td></tr></table></figure>
<blockquote>
<p>Or if youâ€™re using the Asset Catalog, you can simply drag &amp; drop from the Media Library (â‡§âŒ˜m) to your editor to create an image literal.</p>
<p>å¦‚æœä½¿ç”¨ Asset Catalogï¼Œä½ å¯ä»¥ä»åª’ä½“åº“ï¼ˆâ‡§âŒ˜Mï¼‰æ‹–æ‹½åˆ°ç¼–è¾‘å™¨æ¥åˆ›å»ºå›¾åƒã€‚</p>
</blockquote>
<p>For everything else, <code>Bundle</code> provides several instance methods and properties that give the location of standard bundle items, with variants returning either a <code>URL</code> or a <code>String</code>paths:</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>Bundle</code> æä¾›äº†ä¸€äº›å®ä¾‹æ–¹æ³•å’Œå˜é‡æ¥è·å–æ ‡å‡†åŒ…å†…å®¹çš„ä½ç½®ï¼Œè¿”å› URL æˆ– String ç±»å‹çš„è·¯å¾„ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">URL</th>
<th style="text-align:center">Path</th>
<th style="text-align:center">Description</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>executableURL</code></td>
<td style="text-align:center"><code>executablePath</code></td>
<td style="text-align:center">The executable</td>
<td>å¯æ‰§è¡Œæ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center"><code>url(forAuxiliaryExecutable:)</code></td>
<td style="text-align:center"><code>path(forAuxiliaryExecutable:)</code></td>
<td style="text-align:center">The auxiliary executables</td>
<td>è¾…åŠ©çš„å¯æ‰§è¡Œæ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center"><code>resourceURL</code></td>
<td style="text-align:center"><code>resourcePath</code></td>
<td style="text-align:center">The subdirectory containing resources</td>
<td>åŒ…å«èµ„æºçš„å­ç›®å½•</td>
</tr>
<tr>
<td style="text-align:center"><code>sharedFrameworksURL</code></td>
<td style="text-align:center"><code>sharedFrameworksPath</code></td>
<td style="text-align:center">The subdirectory containing shared frameworks</td>
<td>åŒ…å«å…±äº«æ¡†æ¶çš„å­ç›®å½•</td>
</tr>
<tr>
<td style="text-align:center"><code>privateFrameworksURL</code></td>
<td style="text-align:center"><code>privateFrameworksPath</code></td>
<td style="text-align:center">The subdirectory containing private frameworks</td>
<td>åŒ…å«ç§æœ‰æ¡†æ¶çš„å­ç›®å½•</td>
</tr>
<tr>
<td style="text-align:center"><code>builtInPlugInsURL</code></td>
<td style="text-align:center"><code>builtInPlugInsPath</code></td>
<td style="text-align:center">The subdirectory containing plug-ins</td>
<td>åŒ…å«æ’ä»¶çš„å­ç›®å½•</td>
</tr>
<tr>
<td style="text-align:center"><code>sharedSupportURL</code></td>
<td style="text-align:center"><code>sharedSupportPath</code></td>
<td style="text-align:center">The subdirectory containing shared support files</td>
<td>åŒ…å«å…±äº«æ”¯æ´æ–‡ä»¶çš„å­ç›®å½•</td>
</tr>
<tr>
<td style="text-align:center"><code>appStoreReceiptURL</code></td>
<td style="text-align:center"></td>
<td style="text-align:center">The App Store receipt</td>
<td>App Store çš„æ”¶æ®</td>
</tr>
</tbody>
</table>
<h1 id="Getting-App-Information"><a href="#Getting-App-Information" class="headerlink" title="Getting App Information"></a>Getting App Information</h1><p>All app bundles are required to have an <code>Info.plist</code> file that contains information about the app.</p>
<p>æ‰€æœ‰çš„åº”ç”¨åŒ…éƒ½å¿…é¡»æœ‰ä¸€ä¸ªåŒ…å«åº”ç”¨ä¿¡æ¯çš„ <code>Info.plist</code> æ–‡ä»¶ã€‚</p>
<p>Some metadata is accessible directly through instance properties on bundles, including <code>bundleURL</code> and <code>bundleIdentifier</code>.</p>
<p><code>bundleURL</code> å’Œ <code>bundleIdentifier</code> è¿™æ ·çš„åŸæ•°æ®èƒ½å¤Ÿé€šè¿‡ bundle å®ä¾‹è¢«ç›´æ¥è®¿é—®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"></div><div class="line"><span class="keyword">let</span> bundle = <span class="type">Bundle</span>.main</div><div class="line"></div><div class="line">bundle.bundleURL        <span class="comment">// "/path/to/Example.app"</span></div><div class="line">bundle.bundleIdentifier <span class="comment">// "com.nshipster.example"</span></div></pre></td></tr></table></figure>
<p>You can get any other information by subscript access to the <code>infoDictionary</code> property. (Or if that information is presented to the user, use the <code>localizedInfoDictionary</code> property instead).</p>
<p>é€šè¿‡ä¸‹æ ‡èƒ½ä» <code>infoDictionary</code> å˜é‡è·å¾—å…¶ä»–ä¿¡æ¯ï¼ˆå¦‚æœä¿¡æ¯è¦å±•ç¤ºç»™ç”¨æˆ·ï¼Œè¯·ä½¿ç”¨ <code>localizedInfoDictionary</code>ï¼‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">bundle.infoDictionary[<span class="string">"CFBundleName"</span>] <span class="comment">// "Example"</span></div><div class="line">bundle.localizedInfoDictionary[<span class="string">"CFBundleName"</span>] <span class="comment">// "Esempio" (`it_IT` locale)</span></div></pre></td></tr></table></figure>
<h1 id="Getting-Localized-Strings"><a href="#Getting-Localized-Strings" class="headerlink" title="Getting Localized Strings"></a>Getting Localized Strings</h1><p>One of the most important features that bundles facilitate is localization. By enforcing a convention for where localized assets are located, the system can abstract the logic for determining which version of a file to load away from the developer.</p>
<p>åŒ…çš„å­˜åœ¨è®©æœ¬åœ°åŒ–å˜å¾—å®¹æ˜“ã€‚å¼ºåˆ¶æœ¬åœ°åŒ–èµ„æºçš„å­˜æ”¾ä½ç½®åï¼Œç³»ç»Ÿä¾¿èƒ½å°†åŠ è½½å“ªä¸ªç‰ˆæœ¬çš„æ–‡ä»¶çš„é€»è¾‘ä»å¼€å‘è€…å±‚é¢æŠ½è±¡å‡ºæ¥ã€‚</p>
<p>For example, bundles are responsible for loading the localized strings used by your app. You can access them using the <code>localizedString(forKey:value:table:)</code> method.</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼ŒåŒ…è´Ÿè´£åŠ è½½åº”ç”¨çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²ã€‚ä½¿ç”¨ <code>localizedString(forKey:value:table:)</code> æ–¹æ³•å°±å¯ä»¥è·å–åˆ°è¿™äº›å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"></div><div class="line"><span class="keyword">let</span> bundle = <span class="type">Bundle</span>.main</div><div class="line">bundle.localizedString(forKey: <span class="string">"Hello, %@"</span>,</div><div class="line">                       value: <span class="string">"Hello, $&#123;username&#125;"</span>,</div><div class="line">                       table: <span class="literal">nil</span>)</div></pre></td></tr></table></figure>
<p>However, itâ€™s almost always a better idea to use <code>NSLocalizedString</code> so that utilities like <code>genstrings</code> can automatically extract keys and comments to <code>.strings</code> files for translation.</p>
<p>ç„¶è€Œï¼Œé€šå¸¸æ¥è¯´ç”¨ <code>NSLocalizedString</code> ä¼šæ›´å¥½ï¼Œåƒ <code>genstrings</code> è¿™æ ·çš„å·¥å…·èƒ½å¤Ÿè‡ªåŠ¨å–å‡ºé”®å’Œæ³¨é‡Šåˆ° <code>.strings</code> æ–‡ä»¶ä¸­ä¾¿äºç¿»è¯‘ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">NSLocalizedString</span>(<span class="string">"Hello, %@"</span>, comment: <span class="string">"Hello, $&#123;username&#125;"</span>)</div></pre></td></tr></table></figure>
<h2 id="Packages"><a href="#Packages" class="headerlink" title="Packages"></a>Packages</h2><p>Packages are primarily for <strong>improving user experience</strong> by encapsulating and consolidating related resources into a single unit.</p>
<p>åŒ…è£¹æŠŠç›¸å…³èµ„æºå°è£…å’ŒåŠ å›ºæˆä¸€ä¸ªç‹¬ç«‹å•å…ƒï¼Œæ„åœ¨<strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>ã€‚</p>
<p>A directory is considered to be a package by the Finder if any of the following criteria are met:</p>
<p>æ»¡è¶³ä»¥ä¸‹ä»»æ„ä¸€ä¸ªæ¡ä»¶ï¼Œç›®å½•å°±ä¼šè¢«è®¿è¾¾è®¤ä¸ºæ˜¯åŒ…è£¹ï¼š</p>
<ul>
<li>The directory has a special extension like <code>.app</code>, <code>.playground</code>, or <code>.plugin</code></li>
<li>The directory has an extension that an app has registered as a document type</li>
<li><p>The directory has an extended attribute designating it as a package *</p>
</li>
<li><p>ç›®å½•æœ‰ç±»ä¼¼äº <code>.app</code>ï¼Œ<code>.playground</code> æˆ– <code>.plugin</code> ç­‰ç‰¹æ®Šæ‰©å±•ã€‚</p>
</li>
<li>ç›®å½•æœ‰ä¸€ä¸ªè¢«ä¸€ä¸ªåº”ç”¨æ³¨å†Œä½œä¸ºæ–‡æ¡£ç±»å‹çš„æ‰©å±•ã€‚</li>
<li>ç›®å½•å…·æœ‰æœ‰æ‰©å±•å±æ€§ï¼Œå°†å…¶æŒ‡å®šä¸ºåŒ…è£¹ã€‚</li>
</ul>
<h1 id="Accessing-the-Contents-of-a-Package"><a href="#Accessing-the-Contents-of-a-Package" class="headerlink" title="Accessing the Contents of a Package"></a>Accessing the Contents of a Package</h1><p>In Finder, you can control-click to show a contextual menu with actions to perform on a selected item. If an item is a package, â€œShow Package Contentsâ€ will appear at the top, under â€œOpenâ€.</p>
<p>åœ¨è®¿è¾¾ä¸­ï¼Œå³é”®å±•ç¤ºé€‰ä¸­é¡¹ç›®çš„å¯æ“ä½œç›®å½•ã€‚å¦‚æœé€‰ä¸­é¡¹ç›®æ˜¯åŒ…è£¹ï¼Œâ€œæ‰“å¼€â€ æ“ä½œä¸‹ä¼šå‡ºç° â€œæ˜¾ç¤ºåŒ…å†…å®¹â€ é€‰é¡¹ã€‚</p>
<p><img src="https://i.loli.net/2019/08/18/S5kMjaqXCR3nNvh.png" alt="show-package-contents-c7cc72f58a573cb2fbe349e6f76a4ef29d14fbada3cd9b8376fc37979da16bf3.png"></p>
<p>Selecting this menu item will open a new Finder window from the package directory.</p>
<p>ç‚¹å‡»è¿™ä¸ªé€‰é¡¹ä¼šä»åŒ…è£¹ç›®å½•æ‰“å¼€ä¸€ä¸ªæ–°çš„è®¿è¾¾çª—å£ã€‚</p>
<p>You can, of course, access the contents of a package programmatically, too. The best option depends on the kind of package:</p>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»£ç è®¿é—®åŒ…è£¹ä¸­çš„å†…å®¹ã€‚åŒ…è£¹çš„ç±»å‹å†³å®šäº†è·å–å†…å®¹çš„æœ€ä½³æ–¹å¼ï¼š</p>
<ul>
<li>If a package has bundle structure, itâ€™s usually easiest to use <a href="https://developer.apple.com/documentation/foundation/bundle" target="_blank" rel="external"><code>Bundle</code></a> as described in the previous section.</li>
<li>If a package is a document, you can use <a href="https://developer.apple.com/documentation/appkit/nsdocument" target="_blank" rel="external"><code>NSDocument</code></a> on macOS and <a href="https://developer.apple.com/documentation/uikit/uidocument" target="_blank" rel="external"><code>UIDocument</code></a>on iOS.</li>
<li><p>Otherwise, you can use <a href="https://developer.apple.com/documentation/foundation/filewrapper" target="_blank" rel="external"><code>FileWrapper</code></a> to navigate directories, files, and symbolic links, and <a href="https://developer.apple.com/documentation/foundation/filehandle" target="_blank" rel="external"><code>FileHandler</code></a> to read and write to file descriptors.</p>
</li>
<li><p>å¦‚æœåŒ…è£¹æœ‰åŒ…çš„ç»“æ„ï¼Œå‰æ–‡æ‰€è¯´çš„ <code>Bundle</code> å°±èƒ½è½»æ¾èƒœä»»ã€‚</p>
</li>
<li>å¦‚æœåŒ…è£¹æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼Œåœ¨ macOS ä¸Šä½¿ç”¨ <code>NSDocument</code> æˆ–åœ¨ iOS ä¸Šä½¿ç”¨ <code>UIDocument</code> æ¥è®¿é—®ã€‚</li>
<li>å…¶ä»–æƒ…å†µä¸‹ï¼Œç”¨ <code>FileWrapper</code> å¯¼èˆªç›®å½•ï¼Œæ–‡ä»¶å’Œç¬¦å·é“¾æ¥ï¼Œç”¨ <code>FileHandler</code> æ¥è¯»å†™æ–‡ä»¶æè¿°ã€‚</li>
</ul>
<h1 id="Determining-if-a-Directory-is-a-Package"><a href="#Determining-if-a-Directory-is-a-Package" class="headerlink" title="Determining if a Directory is a Package"></a>Determining if a Directory is a Package</h1><p>Although itâ€™s up to the Finder how it wants to represent files and directories, most of that is delegated to the operating system and the services responsible for managing Uniform Type Identifiers (UTIs).</p>
<p>è™½è¯´æ˜¯ç”±è®¿è¾¾å†³å®šå¦‚ä½•å±•ç¤ºæ–‡ä»¶å’Œç›®å½•ï¼Œå¤§å¤šæ•°çš„åˆ¤æ–­ä¼šè¢«ä»£ç†ç»™æ“ä½œç³»ç»Ÿä»¥åŠç®¡ç†ç»Ÿä¸€ç±»å‹æ ‡è¯†ï¼ˆUTIï¼‰çš„æœåŠ¡ã€‚</p>
<p>To determine whether a file extension is one of the built-in system package types or used by an installed app as a registered document type, access the URL resource <a href="https://developer.apple.com/documentation/foundation/urlresourcekey/1413867-ispackagekey" target="_blank" rel="external"><code>isPackageKey</code></a>:</p>
<p>å¦‚æœæƒ³è¦ç¡®å®šä¸€ä¸ªæ–‡ä»¶æ‰©å±•æ˜¯ä¸€ä¸ªå†…ç½®ç³»ç»ŸåŒ…è£¹ç±»å‹ï¼Œè¿˜æ˜¯ä¸€ä¸ªè¢«å·²å®‰è£…çš„åº”ç”¨ä½¿ç”¨çš„æ–‡æ¡£ç±»å‹ï¼Œè°ƒç”¨ Core Services æ–¹æ³• <code>UTTypeCreatePreferredIdentifierForTag(_:_:_:)</code> ä¸ <code>UTTypeConformsTo(_:_:)</code> èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> url: <span class="type">URL</span> = ...</div><div class="line"><span class="keyword">let</span> directoryIsPackage = (<span class="keyword">try</span>? url.resourceValues(forKeys: [.isPackageKey]).isPackage) ?? <span class="literal">false</span></div></pre></td></tr></table></figure>
<p>Or, if you donâ€™t have a <code>URL</code> handy and wanted to check a particular filename extension, you could instead use the Core Services framework to make this determination:</p>
<p>æˆ–è€…ï¼Œå¦‚æœæ²¡æœ‰æ–¹ä¾¿çš„ URL æƒ³è¦æ£€æŸ¥ç‰¹å®šçš„æ–‡ä»¶æ‹“å±•åï¼Œä½ å¯ä»¥ç”¨ Core Services æ¡†æ¶æ¥åšå‡ºæ­¤å†³å®šï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> CoreServices</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">filenameExtensionIsPackage</span><span class="params">(<span class="number">_</span> filenameExtension: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> uti = <span class="type">UTTypeCreatePreferredIdentifierForTag</span>(</div><div class="line">                        kUTTagClassFilenameExtension,</div><div class="line">                        filenameExtension <span class="keyword">as</span> <span class="type">NSString</span>, <span class="literal">nil</span></div><div class="line">                    )?.takeRetainedValue()</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="type">UTTypeConformsTo</span>(uti, kUTTypePackage)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> xcode = <span class="type">URL</span>(fileURLWithPath: <span class="string">"/Applications/Xcode.app"</span>)</div><div class="line">directoryIsPackage(xcode) <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>If you want to set the so-called â€œpackage bitâ€ for a file the hard way (rather than calling <code>URL.setResourceValues(_:)</code>), spelunking through <a href="https://opensource.apple.com/source/CarbonHeaders/CarbonHeaders-8A428/Finder.h" target="_blank" rel="external">CarbonCore/Finder.h</a> indicates that you can do this by setting the <code>kHasBundle</code> (<code>0x2000</code>) flag in the <code>com.apple.FinderInfo</code> extended attribute:</p>
<p>æˆ‘ä»¬æ‰¾ä¸åˆ°ä»»ä½•æè¿°å¦‚ä½•è®¾ç½®æ‰€è°“çš„åŒ…è£¹æ¯”ç‰¹ï¼ˆpackage bitï¼‰çš„æ–‡æ¡£ï¼Œä½†æ ¹æ® <a href="https://opensource.apple.com/source/CarbonHeaders/CarbonHeaders-8A428/Finder.h" target="_blank" rel="external">CarbonCore/Finder.h</a>ï¼Œåœ¨ <code>com.apple.FindlerInfo</code> æ‰©å±•å‚æ•°ä¸­è®¾ç½® <code>kHasBundleï¼ˆ0x2000ï¼‰</code> æ ‡ç¤ºèƒ½å¤Ÿå®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ xattr -wx com.apple.FinderInfo /path/to/package \</div><div class="line">  00 00 00 00 00 00 00 00 20 00 00 00 00 00 00 00 \</div><div class="line">  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00</div></pre></td></tr></table></figure>
<hr>
<p>As weâ€™ve seen, itâ€™s not just end-users that benefit from abstractions â€” whether itâ€™s the safety and expressiveness of a high-level programming language like Swift or the convenience of APIs like Foundation, we as developers leverage abstraction to make great software.</p>
<p>æ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„é‚£æ ·ï¼Œå¹¶éåªæœ‰ç»ˆç«¯ç”¨æˆ·ä»æŠ½è±¡ä¸­è·ç›Š â€”â€” æ— è®ºæ˜¯åƒ Swift è¿™æ ·çš„é«˜çº§ç¼–ç¨‹è¯­è¨€çš„å®‰å…¨æ€§å’Œè¡¨ç°åŠ›ï¼Œè¿˜æ˜¯åƒ Foundation è¿™æ ·çš„ API çš„ä¾¿åˆ©æ€§ï¼Œä½œä¸ºå¼€å‘è€…ä¹Ÿå¯ä»¥åˆ©ç”¨æŠ½è±¡å¼€å‘å‡ºä¼˜ç§€çš„è½¯ä»¶ã€‚</p>
<p>For all that we may (rightfully) complain about abstractions that are <a href="https://en.wikipedia.org/wiki/Leaky_abstraction" target="_blank" rel="external">leaky</a> or <a href="https://en.wikipedia.org/wiki/Abstraction_inversion" target="_blank" rel="external">inverted</a>, itâ€™s important to take a step back and realize how many useful abstractions we deal with every day, and how much they allow us to do.</p>
<p>æˆ–è®¸æˆ‘ä»¬ä¼šæŠ±æ€¨ <a href="https://en.wikipedia.org/wiki/Leaky_abstraction" target="_blank" rel="external">æŠ½è±¡æ³„æ¼</a> ä¸ <a href="https://en.wikipedia.org/wiki/Abstraction_inversion" target="_blank" rel="external">æŠ½è±¡åè½¬</a> å¸¦æ¥çš„é—®é¢˜ï¼Œä½†é‡è¦çš„æ˜¯é€€ä¸€æ­¥ï¼Œäº†è§£æˆ‘ä»¬æ¯å¤©å¤„ç†å¤šå°‘æœ‰ç”¨çš„æŠ½è±¡ï¼Œä»¥åŠå®ƒä»¬å¸¦ç»™äº†æˆ‘ä»¬å¤šå°‘å¯èƒ½æ€§ã€‚</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://swift.gg/2019/07/19/nshipster-bundles-and-packages/" target="_blank" rel="external">https://swift.gg/2019/07/19/nshipster-bundles-and-packages/</a></p>
<p><a href="https://nshipster.com/bundles-and-packages/" target="_blank" rel="external">https://nshipster.com/bundles-and-packages/</a></p>

      
    </div>
    
    
    
    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  <!-- JSåº“ sweetalert å¯ä¿®æ”¹è·¯å¾„ -->
  <script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
  <script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">
  <p><span>Title:  </span>Bundles and Packages</a></p>
  <p><span>Author:  </span>Tuski</a></p>
  <p><span>Published:  </span>08/18/2019 - 17:21:39</p>
  <p><span>Updated:  </span>08/18/2019 - 17:51:22</p>
  <p><span>Link:  </span><a href="/2019/08/Bundles-and-Packages/" title="Bundles and Packages">http://www.perphet.com/2019/08/Bundles-and-Packages/</a>
    <span class="copy-path"  title="Click to Copy article link"><i class="fa fa-clipboard" data-clipboard-text="http://www.perphet.com/2019/08/Bundles-and-Packages/"  aria-label="Copy successfullyï¼"></i></span>
  </p>
  <p><span>Protocol:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)</a> Reprinted please keep the original link and author</p>  
</div>
<script>
    var clipboard = new Clipboard('.fa-clipboard');
    clipboard.on('success', $(function(){
      $(".fa-clipboard").click(function(){
        swal({   
          title: "",   
          text: 'Copy successfullyï¼',   
          html: false,
          timer: 500,   
          showConfirmButton: false
        });
      });
    }));  
</script>

      
    </div>

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>Thx F Sup</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="https://i.loli.net/2017/12/16/5a33fd668ce7c.png" alt="Tuski WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://i.loli.net/2017/12/16/5a33fdbe62e6f.png" alt="Tuski Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Swift/" rel="tag"><i class="fa fa-tag"></i> Swift</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        
          <div class="wp_rating">
         
            <div id="wpac-rating"></div>
          </div>
        

        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/OC-Runtime/" rel="next" title="OC Runtime">
                <i class="fa fa-chevron-left"></i> OC Runtime
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/Ways-to-solve-could-not-build-objective-c-module/" rel="prev" title="Ways to solve 'could not build objective-c module'">
                Ways to solve 'could not build objective-c module' <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_inline_share_toolbox">
  <script type = "text/javascript" src = "//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a35fec5ad889f1e" async = "async" ></script>
</div>

      
    </div>
  </div>


          </div>
          


          
  
    <div class="comments" id="comments">
      <div id="hypercomments_widget"></div>
    </div>
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="Tuski" />
            
              <p class="site-author-name" itemprop="name">Tuski</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/thevenomsnake" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:thevenomsnake@icloud.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://plus.google.com/u/0/104624402456467592306" target="_blank" title="Google">
                    
                      <i class="fa fa-fw fa-google"></i>Google</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/perphet" target="_blank" title="Twitter">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.youtube.com/channel/UComQu3jg43YgIvm2PqAG1tA" target="_blank" title="YouTube">
                    
                      <i class="fa fa-fw fa-youtube"></i>YouTube</a>
                </span>
              
            
          </div>

          
          


  <div class="links-of-blogroll motion-element links-of-blogroll-block">
    <div class="links-of-blogroll-title">
      <i class="fa  fa-fw fa-globe"></i>
      Links&nbsp;
      <i class="fa  fa-fw fa-globe"></i>
    </div>
    <ul class="links-of-blogroll-list">
      
        <li class="links-of-blogroll-item">
          <a href="https://blog.crazyforcode.org/" title="CFC" target="_blank">CFC</a>
        </li>
      
    </ul>
     
  </div>
 

          
      <iframe src="https://open.spotify.com/embed?uri=spotify:user:spotify:playlist:37i9dQZF1DXcBWIGoYBM5M&theme=white" width="215" height="350" frameborder="0" allowtransparency="true"></iframe>
       
      </section>


      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Bundles"><span class="nav-text">Bundles</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Accessing-Bundle-Contents"><span class="nav-text">Accessing Bundle Contents</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Getting-App-Information"><span class="nav-text">Getting App Information</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Getting-Localized-Strings"><span class="nav-text">Getting Localized Strings</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Packages"><span class="nav-text">Packages</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Accessing-the-Contents-of-a-Package"><span class="nav-text">Accessing the Contents of a Package</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Determining-if-a-Directory-is-a-Package"><span class="nav-text">Determining if a Directory is a Package</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-text">Reference</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="heart">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tuski</span>



  
</div>




  <div class="powered-by">Powered by </div>



  <span class="post-meta-divider">Perphet</span>


<!--

  <div class="theme-info">Theme &mdash;  v{}</div>




-->






        







        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  










  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	

		<script type="text/javascript">
		_hcwp = window._hcwp || [];

		_hcwp.push({widget:"Bloggerstream", widget_id: 99037, selector:".hc-comment-count", label: "{\%COUNT%\}" });

		
		_hcwp.push({widget:"Stream", widget_id: 99037, xid: "2019/08/Bundles-and-Packages/"});
		

		(function() {
		if("HC_LOAD_INIT" in window)return;
		HC_LOAD_INIT = true;
		var lang = (navigator.language || navigator.systemLanguage || navigator.userLanguage || "en").substr(0, 2).toLowerCase();
		var hcc = document.createElement("script"); hcc.type = "text/javascript"; hcc.async = true;
		hcc.src = ("https:" == document.location.protocol ? "https" : "http")+"://w.hypercomments.com/widget/hc/99037/"+lang+"/widget.js";
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(hcc, s.nextSibling);
		})();
		</script>

	












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("c6sjJ6fGADGrCVC48k5MVQcD-gzGzoHsz", "YuTcQ8aPXftmtmeC4VvTrK9B");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
  <script type="text/javascript">
  wpac_init = window.wpac_init || [];
  wpac_init.push({widget: 'Rating', id: 8566,
    el: 'wpac-rating',
    color: 'fc6423'
  });
  (function() {
    if ('WIDGETPACK_LOADED' in window) return;
    WIDGETPACK_LOADED = true;
    var mc = document.createElement('script');
    mc.type = 'text/javascript';
    mc.async = true;
    mc.src = '//embed.widgetpack.com/widget.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
  })();
  </script>


  

  

  

  
<div id="hexo-helper-live2d">
  <canvas id="live2dcanvas" width="150" height="350"></canvas>
</div>
<style>
  #live2dcanvas{
    position: fixed;
    width: 150px;
    height: 350px;
    opacity:0.8;
    right: 0px;
    z-index: 999;
    pointer-events: none;
    bottom: -20px;
  }
</style>
<script type="text/javascript" src="/live2d/device.min.js"></script>
<script type="text/javascript">
const loadScript = function loadScript(c,b){var a=document.createElement("script");a.type="text/javascript";"undefined"!=typeof b&&(a.readyState?a.onreadystatechange=function(){if("loaded"==a.readyState||"complete"==a.readyState)a.onreadystatechange=null,b()}:a.onload=function(){b()});a.src=c;document.body.appendChild(a)};
(function(){
  if((typeof(device) != 'undefined') && (device.mobile())){
    var trElement = document.getElementById('hexo-helper-live2d');
    trElement.parentNode.removeChild(trElement);
    return;
  }else
    if (typeof(device) === 'undefined') console.error('Cannot find current-device script.');
  loadScript("/live2d/script.js", function(){loadlive2d("live2dcanvas", "/live2d/assets/shizuku.model.json", 0.5);});
})();
</script>

 <canvas class="fireworks" 
        style="position: fixed; left: 0px; top: 0px; z-index: 99999999; pointer-events: none; width: 1158px; height: 916px;" 
        width="2316" 
        height="1832">
</canvas>
<script type="text/javascript" src="/js/src/anime.min.js"></script>
<script type="text/javascript" src="/js/src/fireworks.js"></script>
</body>
</html>
